<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta property="og:url" content="https://www.liunaijie.top/publish/%E6%AF%94%E7%89%B9%E5%B8%81%E4%B8%8E%E5%8C%BA%E5%9D%97%E9%93%BE/">
  <meta property="og:site_name" content="Jarvis`s library">
  <meta property="og:title" content="比特币与区块链">
  <meta property="og:description" content="前段时间看了一个web3的视频, 对区块链有了兴趣, 想了解一下这是什么内容, 底层原理等. 看了一段时间的材料, 用这篇文章总结一下目前的看法. 推荐课程: 北京大学肖臻老师《区块链技术与应用》公开课, 这个课程感觉是目前对比特币技术原理讲的最清楚的一门课了.
Web3是什么 回顾互联网的发展历史, 可以这样来进行划分:
门户网站, 这时用户看到的信息是由门户网站的编辑来维护, 每个人看到的信息都是一样的, 信息的维护由专门的人来进行维护. 信息的所有权在门户网站. 互联网, 这时发展出来各种网络分享平台, 用户上传信息到平台上, 与其他人进行分享. 这里的信息由用户自己创造, 发布. 但是信息的所有权并不在用户手里, 而是在平台方. 基于区块链的信息共享平台, 由于区块链是一个公用的信息存储介质, 所以用户自己拥有数据的所有权. 区块链是什么 区块链是一个数据结构, 与链表相似 这里使用比特币的头节点结构来解释区块链的运行原理. 在头节点里存储了以下几个字段:
previous_block_hash (存储了上一个区块链的哈希值, 从而可以构成链表) version (当前节点协议的版本) nonce (随机数) timestamp (生成这个节点的时间) difficulty (生成这个节点的难度) merkle_root (对body内容构建merkle tree后根节点的值) Body中可以根据我们的实际应用场景存储一些不同的内容 在这里并没有存储当前Block的ID, 我们需要根据header中的内容进行哈希计算后得到. curBlockId= f(header)
一个节点的生成规则是: 对当前节点的头部信息做哈希后得到的值能满足某个值(这个值由difficulty决定) 用公式表达为: hash(header) &lt; N 这里的nonce就是在其他信息都固定的情况下来调整最终结果的字段. 这里还有一个可以修改的值为: merkle_root. 在body中我们可以接受很多个消息, 将消息取哈希后, 再相邻的两两节点取哈希, 最终得到ROOT节点, 将这个值存储到header中. market tree 在比特币的链中，数据结构分为head和body。body存储交易信息，head中存储了由body中交易信息构建的market tree头节点 在轻节点中不需要存储交易信息，但当交易发生后进行验证时，需要转账方提供交易的信息，然后轻节点计算出哈希表后向其他全节点获取交易链路上其他节点的哈希值，向上计算后得到一个根哈希值，验证与链中的头节点是否一致，如何一致则说明交易已被写入到链中">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="publish">
    <meta property="article:published_time" content="2023-08-06T00:00:00+00:00">
    <meta property="article:modified_time" content="2023-08-06T00:00:00+00:00">
    <meta property="article:tag" content="Web3">
    <meta property="article:tag" content="Bitcorn">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="比特币与区块链">
  <meta name="twitter:description" content="前段时间看了一个web3的视频, 对区块链有了兴趣, 想了解一下这是什么内容, 底层原理等. 看了一段时间的材料, 用这篇文章总结一下目前的看法. 推荐课程: 北京大学肖臻老师《区块链技术与应用》公开课, 这个课程感觉是目前对比特币技术原理讲的最清楚的一门课了.
Web3是什么 回顾互联网的发展历史, 可以这样来进行划分:
门户网站, 这时用户看到的信息是由门户网站的编辑来维护, 每个人看到的信息都是一样的, 信息的维护由专门的人来进行维护. 信息的所有权在门户网站. 互联网, 这时发展出来各种网络分享平台, 用户上传信息到平台上, 与其他人进行分享. 这里的信息由用户自己创造, 发布. 但是信息的所有权并不在用户手里, 而是在平台方. 基于区块链的信息共享平台, 由于区块链是一个公用的信息存储介质, 所以用户自己拥有数据的所有权. 区块链是什么 区块链是一个数据结构, 与链表相似 这里使用比特币的头节点结构来解释区块链的运行原理. 在头节点里存储了以下几个字段:
previous_block_hash (存储了上一个区块链的哈希值, 从而可以构成链表) version (当前节点协议的版本) nonce (随机数) timestamp (生成这个节点的时间) difficulty (生成这个节点的难度) merkle_root (对body内容构建merkle tree后根节点的值) Body中可以根据我们的实际应用场景存储一些不同的内容 在这里并没有存储当前Block的ID, 我们需要根据header中的内容进行哈希计算后得到. curBlockId= f(header)
一个节点的生成规则是: 对当前节点的头部信息做哈希后得到的值能满足某个值(这个值由difficulty决定) 用公式表达为: hash(header) &lt; N 这里的nonce就是在其他信息都固定的情况下来调整最终结果的字段. 这里还有一个可以修改的值为: merkle_root. 在body中我们可以接受很多个消息, 将消息取哈希后, 再相邻的两两节点取哈希, 最终得到ROOT节点, 将这个值存储到header中. market tree 在比特币的链中，数据结构分为head和body。body存储交易信息，head中存储了由body中交易信息构建的market tree头节点 在轻节点中不需要存储交易信息，但当交易发生后进行验证时，需要转账方提供交易的信息，然后轻节点计算出哈希表后向其他全节点获取交易链路上其他节点的哈希值，向上计算后得到一个根哈希值，验证与链中的头节点是否一致，如何一致则说明交易已被写入到链中">

  
  
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#181818">
  <title>
    
    Jarvis`s library - 比特币与区块链
    
  </title>
  
  
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  
  
  
  <link rel="stylesheet" href="/minima.54cfcb44e10b4015b41a13771763013b79bdba6a92e49ea4a77bb44db465e761.css" integrity="sha256-VM/LROELQBW0GhN3F2MBO3m9umqS5J6kp3u0TbRl52E=">
  
  
  
  <script defer type="text/javascript" src="/minima.b4da24217e147f536fc7dc225886a1ea20bedabe7aed49e546a5d97cc34e4555.js" integrity="sha256-tNokIX4Uf1Nvx9wiWIah6iC&#43;2r567UnlRqXZfMNORVU="></script>
  
  
  
</head>
<script>
  const theme_config = 'system'
  const theme_light = theme_config === 'system' ? 'light' : theme_config;
  let theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : theme_light;
  console.debug(theme);

  try {
    localStorage.setItem('theme', theme);
    window.minima_theme = theme;
    document.querySelector('html').classList.add(theme);
  } catch (e) {
    console.error(e);
  }
</script>



<body>
  <header class="mt-3 mb-8">
  <div class="container mx-auto">
    <nav class="flex justify-between items-center">
      <div class="flex items-center">
        
        <div id="theme-switch" class="text-2xl cursor-pointer"></div>
      </div>
      <ul class="flex items-center text-base font-semibold
        whitespace-nowrap overflow-x-auto overflow-y-hidden">
        
        <li class="ml-2 mr-2">
          
          <a href='/'>首页</a>
          
        </li>
        
        <li class="ml-2 mr-2">
          
          <a href="/tags">标签</a>
          
        </li>
        
        <li class="ml-2 mr-2">
          
          <a href="/search">搜索</a>
          
        </li>
        
        <li class="ml-2 mr-2">
          
          <a href="/about">关于</a>
          
        </li>
        
      </ul>
      <ul class="flex item-center text-sm font-semibold">
        
        <li class="ml-2"><a href="https://www.liunaijie.top/"></a></li>
        
      </ul>
    </nav>
  </div>
</header>

  
<div class="container mx-auto">
  <h1 class="text-4xl font-extrabold mt-6 mb-6">比特币与区块链</h1>
  <div class="mb-3 text-sm flex justify-between ">
    <div>
      
      发布于 &mdash; 2023 年 08 月 06 日
      
      
    </div>
    
    <div>
      
      
      <a class="ml-1" href="/tags/Web3">#Web3</a>
      
      
      <a class="ml-1" href="/tags/bitcorn">#bitcorn</a>
      
    </div>
    
  </div>
  <main class="mb-8">
    <p></p>
    <article class="md">
      <p>前段时间看了一个web3的视频, 对区块链有了兴趣, 想了解一下这是什么内容, 底层原理等.
看了一段时间的材料, 用这篇文章总结一下目前的看法.
推荐课程:  <a href="https://www.bilibili.com/video/BV1Vt411X7JF/">北京大学肖臻老师《区块链技术与应用》公开课</a>, 这个课程感觉是目前对比特币技术原理讲的最清楚的一门课了.</p>
<h1 id="web3是什么">Web3是什么</h1>
<p>回顾互联网的发展历史, 可以这样来进行划分:</p>
<ol>
<li>门户网站, 这时用户看到的信息是由门户网站的编辑来维护, 每个人看到的信息都是一样的, 信息的维护由专门的人来进行维护. 信息的所有权在门户网站.</li>
<li>互联网, 这时发展出来各种网络分享平台, 用户上传信息到平台上, 与其他人进行分享. 这里的信息由用户自己创造, 发布. 但是信息的所有权并不在用户手里, 而是在平台方.</li>
<li>基于区块链的信息共享平台, 由于区块链是一个公用的信息存储介质, 所以用户自己拥有数据的所有权.</li>
</ol>
<h1 id="区块链是什么">区块链是什么</h1>
<p>区块链是一个数据结构, 与链表相似
<img src="https://raw.githubusercontent.com/liunaijie/images/master/202308061427569.png" alt="">
<img src="https://raw.githubusercontent.com/liunaijie/images/master/202308061428506.png" alt="">
<img src="https://raw.githubusercontent.com/liunaijie/images/master/202308061429816.png" alt=""></p>
<p>这里使用比特币的头节点结构来解释区块链的运行原理.
在头节点里存储了以下几个字段:</p>
<ul>
<li>previous_block_hash (存储了上一个区块链的哈希值, 从而可以构成链表)</li>
<li>version (当前节点协议的版本)</li>
<li>nonce (随机数)</li>
<li>timestamp (生成这个节点的时间)</li>
<li>difficulty (生成这个节点的难度)</li>
<li>merkle_root (对body内容构建merkle tree后根节点的值)</li>
</ul>
<p>Body中可以根据我们的实际应用场景存储一些不同的内容
在这里并没有存储当前Block的ID, 我们需要根据header中的内容进行哈希计算后得到.
<code>curBlockId= f(header)</code></p>
<p>一个节点的生成规则是: 对当前节点的头部信息做哈希后得到的值能满足某个值(这个值由difficulty决定)
用公式表达为: <code>hash(header) &lt; N</code>
这里的nonce就是在其他信息都固定的情况下来调整最终结果的字段.
这里还有一个可以修改的值为: merkle_root.
在body中我们可以接受很多个消息, 将消息取哈希后, 再相邻的两两节点取哈希, 最终得到ROOT节点, 将这个值存储到header中.
<img src="https://raw.githubusercontent.com/liunaijie/images/master/202308061429737.png" alt=""></p>
<h2 id="market-tree">market tree</h2>
<p>在比特币的链中，数据结构分为head和body。body存储交易信息，head中存储了由body中交易信息构建的market tree头节点
在轻节点中不需要存储交易信息，但当交易发生后进行验证时，需要转账方提供交易的信息，然后轻节点计算出哈希表后向其他全节点获取交易链路上其他节点的哈希值，向上计算后得到一个根哈希值，验证与链中的头节点是否一致，如何一致则说明交易已被写入到链中</p>
<h2 id="难度值和随机数的意义">难度值和随机数的意义</h2>
<p>我们使用哈希函数来计算当前Block的ID, 难度值是限制哈希函数得到的结果必须有difficulty个0开头.
其中由于version, preId, timestamp, difficulty, body hash的值都是固定的, 所以我们需要改变nonce从而改变哈希值的结果, 达到以N个0开头的结果</p>
<h2 id="为什么说区块链是不可逆的">为什么说区块链是不可逆的</h2>
<ol>
<li>哈希值</li>
<li>去中心化
由于哈希计算对微小的改动也会得到不一样的结果, 所以当我们对某个Block中的body进行修改后, body hash就会被改变, body hash被改变后, curId也会被改变, 从而切断了关联关系
并且由于区块链是去中心化的, 我们即便通过修改nonce完成了计算, 使得curId符合规范, 但是这个时间其他节点可能也已经完成了下一个节点的计算, 由于区块链的最长原则, 大家都只认最长节点不承认你修改过后的节点</li>
</ol>
<h2 id="权益激励">权益激励</h2>
<p>区块链这样的数据结构, 产生下一个区块要消耗算力去计算, 我们为什么要去干这个事情呢, 我们把需要记录的信息发送出去让其他人给我记录不就好了吗? 白嫖不香吗?
为了激励大家来进行计算产生区块, 都会给一定的权益来激励用户.</p>
<h1 id="比特币对区块链的应用">比特币对区块链的应用</h1>
<p>中本聪在2008年发布了比特币的白皮书: 《Bitcoin: A Peer-to-Peer Electronic Cash System》
<a href="../../others/E-Books/BitCoin/Bitcoin%20A%20peer-to-Peer%20Electronic%20Cash%20System.pdf">bitcoin</a>
<a href="../../others/E-Books/BitCoin/%E6%AF%94%E7%89%B9%E5%B8%81%20%E4%B8%80%E7%A7%8D%E7%82%B9%E5%AF%B9%E7%82%B9%E7%94%B5%E5%AD%90%E8%B4%A7%E5%B8%81%E7%B3%BB%E7%BB%9F.pdf">bitcoin_zh</a>
文中详细说明了如何使用区块链来进行记账, 从而将比特币作为一种电子货币.
Block的body中进行记账
比特币会对产生Block的人进行激励, 奖励比特币</p>
<h2 id="挖矿是什么">挖矿是什么</h2>
<p>将计算nonce的过程叫做挖坑</p>
<h3 id="矿池是什么">矿池是什么</h3>
<p>我们假设nonce的范围是0-99, 那么如果单机运算, 我们的电脑需要计算100次才能得到正确结果, 假如我们有100台计算机, 我们将计算任务分发到这100台计算机上, 那么每台计算机只需要计算1次就能得到结果.
矿池就是将大家的算力集中起来进行计算, 完成计算后按照某种规则再进行分成.</p>
<h2 id="比特币如何进行初始化的或者说是如何发展起来的">比特币如何进行初始化的或者说是如何发展起来的</h2>
<p>我们去看比特币的<a href="https://explorer.btc.com/btc/block/000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f">创世链</a>就可以看出, 第一个块中只有一个交易信息, 就是在计算完成后, 中本聪向某个地址转了50个比特币.
在后续的块中，交易信息上很少甚至没有的，这时的挖矿难度也比较低</p>
<h2 id="比特币的稀缺性">比特币的稀缺性</h2>
<p>比特币的发行只有出块奖励一种方式，并且出块奖励会每隔一段时间进行减半.</p>
<h2 id="比特币的匿名性">比特币的匿名性</h2>
<p>比特币的内部交易是无法追踪到实体世界中的个人，但可以通过转账关系来确定某些账户的关联关系
如果需要将比特币进行提现，那么必然需要与实体世界进行关联，这时就可能被关联到个人信息</p>
<h2 id="权益算法">权益算法</h2>
<h1 id="ipfs">IPFS</h1>

    </article>
  </main>
  

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css"
    integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js"
    integrity="sha384-YNHdsYkH6gMx9y3mRkmcJ2mFUjTd0qNQQvY9VYZgQd7DcN7env35GzlmFaZ23JGp"
    crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js"
    integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl"
    crossorigin="anonymous"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        renderMathInElement(document.body, {
            
            
            delimiters: [
                { left: '$$', right: '$$', display: true },
                { left: '$', right: '$', display: false },
                { left: '\\(', right: '\\)', display: false },
                { left: '\\[', right: '\\]', display: true }
            ],
            
            throwOnError: false
        });
    });
</script>





<script 
  src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"
  crossorigin="anonymous">
</script>
<script>
  mermaid.init(undefined, 'code.language-mermaid')
</script>




</div>


  <footer class="mt-8 mb-8">
  <div class="container mx-auto">
    <div class="mt-8 flex flex-col-reverse sm:flex-row sm:justify-between items-center">
      <div class="text-center sm:text-left">
        <p class="mt-0 text-sm"></p>
        <p class="mt-0 text-xs">
          Built with <a href="https://gohugo.io" target="_blank" rel="noopener noreferrer">Hugo</a> v0.143.1
          and <a href="https://github.com/mivinci/hugo-theme-minima" target="_blank" rel="noopener noreferrer">Minima</a>
        </p>
      </div>
      
      <p class="flex items-center mt-0">
        
          <a class="icon ml-1 mr-1" href="mailto:jarvis@apache.org" title="email">
          
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 21" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><path d="M22 6l-10 7L2 6"/></svg>
          
          </a>
        
          <a class="icon ml-1 mr-1" href="https://github.com/liunaijie" title="github">
          
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
          
          </a>
        
          <a class="icon ml-1 mr-1" href="/index.xml" title="rss">
          
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg>
          
          </a>
        
      </p>
    </div>
  </div>
</footer>
</body>

</html>