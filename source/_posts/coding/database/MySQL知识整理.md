---
title: MySQLçŸ¥è¯†æ•´ç†
date: 2019-09-19 10:33:24
toc: true
categories: 
	- [code,database]
tags: 
	- mysql
---

æ¨èçœ‹ä¸€ä¸‹æå®¢æ—¶é—´ä¸Šé¢çš„ä¸€ç¯‡æ•™ç¨‹ï¼Œã€Š[MySQLå®æˆ˜ 45 è®²](https://time.geekbang.org/column/intro/100020801)ã€‹ã€‚

# åŸºæœ¬æ¶æ„

![MySQLåŸºæœ¬æ¶æ„](https://raw.githubusercontent.com/liunaijie/images/master/20191110151145.png)

å¼•æ“å±‚é‡‡ç”¨æ’ä»¶å¼ã€‚

<!--more-->

## è¿æ¥å™¨

è´Ÿè´£è·Ÿå®¢æˆ·ç«¯å»ºç«‹è¿æ¥ï¼Œè·å–æƒé™ã€ç»´æŒå’Œç®¡ç†è¿æ¥ã€‚å®¢æˆ·ç«¯è¿æ¥åé•¿æ—¶é—´æ²¡åŠ¨é™ï¼Œè¿æ¥å™¨ä¼šè‡ªåŠ¨å°†ä»–æ–­å¼€ï¼Œè¿™ä¸ªæ—¶é—´æ˜¯ç”±å‚æ•°`wait_timeout`æ§åˆ¶çš„ï¼Œé»˜è®¤å€¼æ˜¯ 8 å°æ—¶ã€‚

## åˆ†æå™¨

è¿™é‡Œé¢åˆ¤æ–­è¾“å…¥çš„è¯­å¥æ˜¯å¯¹ä»€ä¹ˆè¡¨ï¼Œä»€ä¹ˆåˆ—ï¼Œåšä»€ä¹ˆæ“ä½œã€‚å¦‚æœè¯­å¥ä¸å¯¹ï¼Œåˆ™ä¼šæ”¶åˆ°é”™è¯¯æç¤ºã€‚

ğŸŒ°ï¼š`select * from user where id=1;`

è¿™ä¸ªè¯­å¥å®ƒä¼šåˆ†æå‡ºå¯¹`user`è¡¨ï¼Œ`id`åˆ—è¿›è¡ŒæŸ¥è¯¢æ“ä½œã€‚å¦‚æœ`select`å•è¯æ‹¼å†™é”™è¯¯ï¼Œæˆ–è€…sql è¯­æ³•é”™è¯¯æ—¶ï¼Œå®ƒä¼šè¿”å›é”™è¯¯ä¿¡æ¯ã€‚

## ä¼˜åŒ–å™¨

åœ¨è¡¨é‡Œé¢æœ‰å¤šä¸ªç´¢å¼•æ—¶å€™ï¼Œå®ƒæ¥å†³å®šä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼›æˆ–è€…åœ¨ä¸€ä¸ªè¯­å¥æœ‰å¤šè¡¨å…³è”ï¼ˆjoinï¼‰æ—¶ï¼Œå†³å®šå„ä¸ªè¡¨çš„è¿æ¥é¡ºåºã€‚

## æ‰§è¡Œå™¨

å…ˆè¿›è¡Œæƒé™åˆ¤æ–­ï¼Œåˆ¤æ–­æ“ä½œç”¨æˆ·æ˜¯å¦æœ‰å¯¹è¡¨çš„æ“ä½œæƒé™ã€‚

å¦‚æœæœ‰æƒé™ï¼Œå°±æ‰“å¼€è¡¨ç»§ç»­æ‰§è¡Œã€‚

ğŸŒ°ï¼š`select * from user where id=10;`

ä»¥è¿™ä¸ªè¯­å¥ä¸ºä¾‹ï¼Œå½“å­—æ®µæ²¡æœ‰ç´¢å¼•æ—¶ï¼Œæ‰§è¡Œå™¨çš„æ‰§è¡Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š

1. è°ƒç”¨ InnoDB å¼•æ“æ¥å£å–è¿™ä¸ªè¡¨çš„ç¬¬ä¸€è¡Œï¼Œåˆ¤æ–­ ID å€¼æ˜¯ä¸æ˜¯ 10ï¼Œå¦‚æœä¸æ˜¯åˆ™è·³è¿‡ï¼Œå¦‚æœæ˜¯åˆ™å°†è¿™è¡Œå­˜åˆ°ç»“æœé›†ä¸­ï¼›
2. è°ƒç”¨å¼•æ“æ¥å£å–â€œä¸‹ä¸€è¡Œâ€ï¼Œé‡å¤ç›¸åŒçš„åˆ¤æ–­é€»è¾‘ï¼Œç›´åˆ°å–åˆ°è¿™ä¸ªè¡¨çš„æœ€åä¸€è¡Œã€‚
3. æ‰§è¡Œå™¨å°†ä¸Šè¿°éå†è¿‡ç¨‹ä¸­æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„è¡Œç»„æˆçš„è®°å½•é›†ä½œä¸ºç»“æœé›†è¿”å›ã€‚

å¦‚æœæœ‰ç´¢å¼•çš„è¡¨ï¼Œç¬¬ä¸€æ­¥è°ƒç”¨çš„æ˜¯â€œå–æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€è¡Œâ€è¿™ä¸ªæ¥å£ï¼Œä¹‹åå¾ªç¯å–â€œæ»¡è¶³æ¡ä»¶çš„ä¸‹ä¸€è¡Œâ€è¿™ä¸ªæ¥å£ã€

# å¼•æ“

1. InnoDB

ä» 5.5.5 ç‰ˆæœ¬å¼€å§‹ä½œä¸ºé»˜è®¤çš„å¼•æ“

æ”¯æŒäº‹åŠ¡ï¼Œæ”¯æŒè¡Œçº§é”ï¼Œæ”¯æŒå¤–é”®

äº‹åŠ¡çš„åŸºæœ¬è¦ç´ ï¼ˆACIDï¼‰:

- åŸå­æ€§ï¼ˆAtomicityï¼‰

äº‹åŠ¡å¼€å§‹åçš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸åšï¼Œä¸å¯èƒ½éƒ¨åˆ†å®Œæˆã€‚äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºé”™ä¼šå›æ»šåˆ°äº‹åŠ¡å¼€å§‹çš„çŠ¶æ€ï¼Œæ‰€æœ‰çš„æ“ä½œå°±åƒæ²¡å‘ç”Ÿä¸€æ ·ã€‚

- ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰

äº‹åŠ¡å¼€å§‹å‰å’Œç»“æŸåï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§çº¦æŸæ²¡æœ‰è¢«ç ´åã€‚

- éš”ç¦»æ€§ï¼ˆIsolationï¼‰

åŒä¸€æ—¶é—´ï¼Œåªå…è®¸ä¸€ä¸ªäº‹åŠ¡è¯·æ±‚åŒä¸€æ•°æ®ï¼Œä¸åŒäº‹åŠ¡ä¹‹é—´æ‰¹æ¬¡æ²¡æœ‰ä»»ä½•å¹²æ‰°ã€‚

- æŒä¹…æ€§ï¼ˆDurabilityï¼‰

äº‹åŠ¡å®Œæˆåï¼Œäº‹åŠ¡å¯¹æ•°æ®åº“çš„æ‰€æœ‰æ›´æ–°è¢«ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œä¸èƒ½å›æ»šï¼Œä¸ä¼šæ”¹å˜ã€‚

2. MyIsam

ä¹‹å‰çš„é»˜è®¤å¼•æ“ï¼Œä¸æ”¯æŒäº‹åŠ¡ï¼Œåªæ”¯æŒè¡¨çº§é”ï¼Œä¸æ”¯æŒå¤–é”®

# äº‹åŠ¡

## äº‹åŠ¡çš„éš”ç¦»çº§åˆ«

åœ¨MySQLä¸­æœ‰4ç§éš”ç¦»çº§åˆ«

1. `READ UNCOMMITTED`

è¯»æœªæäº¤ï¼šä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤æ—¶ï¼Œå®ƒåšçš„å˜æ›´å°±èƒ½è¢«å…¶ä»–äº‹åŠ¡çœ‹åˆ°ã€‚ä¼šå‡ºç°è„è¯»ã€‚

> åˆ«äººæ”¹æ•°æ®çš„äº‹åŠ¡å°šæœªæäº¤ï¼Œæˆ‘åœ¨æˆ‘çš„äº‹åŠ¡ä¸­å°±èƒ½è¯»åˆ°

2. `READ COMMITTED`

è¯»æäº¤ï¼šä¸€ä¸ªäº‹åŠ¡æäº¤åï¼Œå®ƒåšçš„å˜æ›´å°±èƒ½è¢«å…¶ä»–äº‹åŠ¡çœ‹è§ã€‚å¯ä»¥é¿å…è„è¯»ï¼Œä½†ä¸èƒ½é¿å…é‡å¤è¯»å’Œå¹»è¯»çš„æƒ…å†µã€‚

> åˆ«äººæ”¹æ•°æ®çš„äº‹åŠ¡æäº¤åï¼Œæˆ‘åœ¨æˆ‘çš„äº‹åŠ¡ä¸­æ‰èƒ½è¯»åˆ°

3. `REPEATABLE READ`

å¯é‡å¤è¯»ï¼šï¼ˆMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«ï¼‰ã€‚ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®ï¼Œæ€»æ˜¯è·Ÿè¿™ä¸ªäº‹åŠ¡åœ¨å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®ä¸€è‡´ã€‚æœªæäº¤çš„å˜æ›´å¯¹å…¶ä»–äº‹åŠ¡ä¹Ÿä¸å¯è§ã€‚å®ƒå¯ä»¥é¿å…è„è¯»ï¼Œä¸å¯é‡å¤è¯»çš„é—®é¢˜ã€‚ç†è®ºä¸Šä¼šå‡ºç°å¹»è¯»çš„æƒ…å†µï¼Œä½†æ˜¯MySQLçš„å­˜å‚¨å¼•æ“é€šè¿‡å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶æœºåˆ¶ï¼ˆmvccï¼‰è§£å†³äº†è¯¥é—®é¢˜ï¼Œå› æ­¤è¯¥çº§åˆ«æ˜¯å¯ä»¥é¿å…å¹»è¯»çš„ã€‚

> åˆ«äººè¯¥æ•°æ®çš„äº‹åŠ¡å·²ç»æäº¤ï¼Œæˆ‘åœ¨æˆ‘çš„äº‹åŠ¡é‡Œä¹Ÿä¸å»è¯»

4. `SERIALIZABLE`

å¯ä¸²è¡ŒåŒ–ï¼šå¯¹äºåŒä¸€è¡Œè®°å½•ï¼Œâ€œå†™â€ä¼šåŠ â€œå†™é”â€ï¼Œâ€œè¯»â€ä¼šåŠ â€œè¯»é”â€ã€‚å½“å‡ºç°è¯»å†™é”å†²çªæ—¶ï¼Œåè®¿é—®çš„äº‹åŠ¡å¿…é¡»ç­‰å¾…å‰ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œå®Œæˆï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚å®é™…è¿è¡Œæ—¶æ˜¯åœ¨æ¯ä¸ªè¯»çš„æ•°æ®è¡Œä¸ŠåŠ é”ã€‚æ‰€ä»¥å¯èƒ½å¯¼è‡´å¤§é‡çš„è¶…æ—¶ç°è±¡å’Œé”ç«äº‰ã€‚

> æˆ‘çš„äº‹åŠ¡å°šæœªæäº¤ï¼Œåˆ«äººå°±åˆ«æƒ³è¯¥æ•°æ®

çº§åˆ«ä»ä½åˆ°é«˜ä¾æ¬¡ä¸ºï¼šè¯»æœªæäº¤->è¯»å·²æäº¤->å¯é‡å¤è¯»->å¯ä¸²è¡ŒåŒ–ã€‚

åè¯è§£é‡Šï¼š

è„è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–äº†å¦å¤–ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®ã€‚

é‡å¤è¯»ï¼šåœ¨äº‹åŠ¡å†…é‡å¤è¯»å–äº†åˆ«çš„çº¿ç¨‹å·²ç»æäº¤çš„æ•°æ®ï¼Œä½†æ˜¯ä¸¤æ¬¡è¯»å–çš„ç»“æœä¸ä¸€è‡´ï¼ŒåŸå› æ˜¯åœ¨ä¸¤æ¬¡è¯»å–çš„è¿‡ç¨‹ä¸­å…¶ä»–äº‹åŠ¡åšäº†æ›´æ–°æ“ä½œã€‚

å¹»è¯»ï¼šåœ¨ä¸€ä¸ªäº‹åŠ¡å†…ä¸¤æ¬¡æŸ¥è¯¢çš„æ•°æ®æ¡æ•°ä¸ä¸€è‡´ï¼ŒåŸå› æ˜¯åœ¨æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­å…¶ä»–äº‹åŠ¡åšäº†æ·»åŠ æ“ä½œã€‚

# ç´¢å¼•

## æ•°æ®ç»“æ„

å¯¹äº InnoDB å¼•æ“æ¥è¯´ï¼Œå®ƒå­˜å‚¨æ‰€ä»¥é‡‡ç”¨çš„æ˜¯ B+æ ‘çš„æ•°æ®ç»“æ„ã€‚

![B+æ ‘](https://raw.githubusercontent.com/liunaijie/images/master/B+æ ‘.png)

ä½¿ç”¨ b+ æ ‘ä½œä¸ºç´¢å¼•çš„åŸå› ï¼š

æ•°æ®åº“çš„æ•°æ®æ”¾åˆ°ç£ç›˜ä¸­ï¼Œå¯¹äºç¨‹åºè€Œè¨€æ˜¯å¤–å­˜ï¼Œè¿›è¡Œè¯»å–çš„æ—¶å€™æ¶‰åŠåˆ°ç£ç›˜ io æ“ä½œï¼Œè€Œ io æ“ä½œåˆæ¯”è¾ƒè€—æ—¶ï¼Œæ‰€ä»¥ä¸ºäº†å‡å°‘è€—æ—¶ï¼Œä¸é‡‡ç”¨äºŒå‰æ ‘çš„æ•°æ®ç»“æ„ï¼ˆå¯¹äºæ ‘æ¥è¯´ï¼ŒæŸ¥æ‰¾çš„æ•ˆç‡å–å†³äºæ ‘é«˜ï¼‰ã€‚é‡‡ç”¨ b+ æ ‘ï¼Œå®ƒå°†æ‰€æœ‰æ•°æ®å­˜å‚¨åˆ°å¶å­èŠ‚ç‚¹ä¸­ï¼Œçˆ¶èŠ‚ç‚¹åªå­˜å‚¨ç´¢å¼•ï¼ˆæ‰€ä»¥ç›¸åŒçš„æ•°æ®å¤§å°ï¼Œèƒ½å­˜å‚¨æ›´å¤šçš„èŠ‚ç‚¹ï¼‰ã€‚å¶å­èŠ‚ç‚¹æ„æˆä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼ˆä¾¿äºè¿ç»­æŸ¥è¯¢ï¼‰ã€‚

>**B+æ ‘çš„ç£ç›˜è¯»å†™ä»£ä»·æ›´ä½** 
>B+æ ‘çš„å†…éƒ¨ç»“ç‚¹å¹¶æ²¡æœ‰æŒ‡å‘å…³é”®å­—å…·ä½“ä¿¡æ¯çš„æŒ‡é’ˆã€‚å› æ­¤å…¶å†…éƒ¨ç»“ç‚¹ç›¸å¯¹B æ ‘æ›´å°ã€‚å¦‚æœæŠŠæ‰€æœ‰åŒä¸€å†…éƒ¨ç»“ç‚¹çš„å…³é”®å­—å­˜æ”¾åœ¨åŒä¸€ç›˜å—ä¸­ï¼Œé‚£ä¹ˆç›˜å—æ‰€èƒ½å®¹çº³çš„å…³é”®å­—æ•°é‡ä¹Ÿè¶Šå¤šã€‚ä¸€æ¬¡æ€§è¯»å…¥å†…å­˜ä¸­çš„éœ€è¦æŸ¥æ‰¾çš„å…³é”®å­—ä¹Ÿå°±è¶Šå¤šã€‚ç›¸å¯¹æ¥è¯´IOè¯»å†™æ¬¡æ•°ä¹Ÿå°±é™ä½äº†ã€‚ 
>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ç£ç›˜ä¸­çš„ä¸€ä¸ªç›˜å—å®¹çº³16bytesï¼Œè€Œä¸€ä¸ªå…³é”®å­—2bytesï¼Œä¸€ä¸ªå…³é”®å­—å…·ä½“ä¿¡æ¯æŒ‡é’ˆ2bytesã€‚ä¸€æ£µ9é˜¶B-tree(**ä¸€ä¸ªç»“ç‚¹æœ€å¤š8ä¸ªå…³é”®å­—**)çš„å†…éƒ¨ç»“ç‚¹éœ€è¦2ä¸ªç›˜å¿«ã€‚è€ŒB+æ ‘å†…éƒ¨ç»“ç‚¹åªéœ€è¦1ä¸ªç›˜å¿«ã€‚å½“éœ€è¦æŠŠå†…éƒ¨ç»“ç‚¹è¯»å…¥å†…å­˜ä¸­çš„æ—¶å€™ï¼ŒB æ ‘å°±æ¯”B+æ ‘å¤šä¸€æ¬¡ç›˜å—æŸ¥æ‰¾æ—¶é—´(åœ¨ç£ç›˜ä¸­å°±æ˜¯ç›˜ç‰‡æ—‹è½¬çš„æ—¶é—´)ã€‚
>
>**B+æ ‘çš„æŸ¥è¯¢æ•ˆç‡æ›´åŠ ç¨³å®š** 
>ç”±äºéç»ˆç»“ç‚¹å¹¶ä¸æ˜¯æœ€ç»ˆæŒ‡å‘æ–‡ä»¶å†…å®¹çš„ç»“ç‚¹ï¼Œè€Œåªæ˜¯å¶å­ç»“ç‚¹ä¸­å…³é”®å­—çš„ç´¢å¼•ã€‚æ‰€ä»¥ä»»ä½•å…³é”®å­—çš„æŸ¥æ‰¾å¿…é¡»èµ°ä¸€æ¡ä»æ ¹ç»“ç‚¹åˆ°å¶å­ç»“ç‚¹çš„è·¯ã€‚æ‰€æœ‰å…³é”®å­—æŸ¥è¯¢çš„è·¯å¾„é•¿åº¦ç›¸åŒï¼Œå¯¼è‡´æ¯ä¸€ä¸ªæ•°æ®çš„æŸ¥è¯¢æ•ˆç‡ç›¸å½“ã€‚

## ä½¿ç”¨

ç´¢å¼•ç±»å‹åˆ†ä¸ºä¸»é”®ç´¢å¼•å’Œéä¸»é”®ç´¢å¼•ï¼Œä¸»é”®ç´¢å¼•ä¹Ÿè¢«ç§°ä¸ºèšç°‡ç´¢å¼•ï¼Œå¶å­èŠ‚ç‚¹å­˜çš„æ˜¯æ•´è¡Œæ•°æ®ã€‚éä¸»é”®ç´¢å¼•ä¹Ÿè¢«ç§°ä¸ºäºŒçº§ç´¢å¼•ï¼Œå¶å­èŠ‚ç‚¹å†…å®¹æ˜¯ä¸»é”®çš„å€¼ã€‚æ‰€ä»¥ä½¿ç”¨éä¸»é”®ç´¢å¼•æ—¶éœ€è¦å†æ¬¡ä½¿ç”¨ä¸»é”®ç´¢å¼•è¿›è¡Œå›è¡¨æŸ¥è¯¢ã€‚

### è¦†ç›–ç´¢å¼•

ä¸Šé¢æåˆ°ï¼Œå½“ä½¿ç”¨éä¸»é”®ç´¢å¼•æ—¶éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œä½†æ˜¯å¦‚æœæŸ¥è¯¢ç»“æœåªæœ‰ä¸»é”®çš„å€¼ï¼Œè¿™æ—¶æ‰€éœ€çš„ç»“æœä¸éœ€è¦è¿›è¡Œå›è¡¨å°±èƒ½å¾—åˆ°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¿™ä¸ªæŸ¥è¯¢é‡Œé¢ï¼Œéä¸»é”®ç´¢å¼•å·²ç»â€œè¦†ç›–äº†â€æˆ‘ä»¬çš„æŸ¥è¯¢éœ€æ±‚ï¼Œæˆ‘ä»¬ç§°ä¸ºè¦†ç›–ç´¢å¼•ã€‚

### æœ€å·¦å‰ç¼€åŸåˆ™

ç”±äºä½¿ç”¨çš„æ˜¯ b+æ ‘çš„æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æœ€å·¦å‰ç¼€ã€‚

å½“è¿è¡Œ`select * from user where name like 'å¼ %'`è¿™æ¡è¯­å¥æ—¶ã€‚å¯ä»¥ä» nameç´¢å¼•ä¸Šå…ˆæ‰¾åˆ°`å¼ `çš„ä½ç½®ï¼Œç„¶åå†ä»å¼ çš„ä½ç½®å‘åæŸ¥æ‰¾ï¼Œè¿™æ ·æ¯”ä»å¤´å¼€å§‹æŸ¥æ‰¾æ›´æœ‰æ•ˆç‡ã€‚

å¹¶ä¸”å½“æˆ‘ä»¬å»ºç«‹`a,b,c`ä¸‰ä¸ªå­—æ®µçš„è”åˆç´¢å¼•æ—¶ï¼ŒæŸ¥è¯¢æ¡ä»¶åªæœ‰`a`æˆ–è€…`a.b`æ—¶ä¹Ÿå¯ä»¥ç”¨åˆ°è¿™ä¸ª`a,b,c`çš„è”åˆç´¢å¼•

### ç´¢å¼•ä¸‹æ¨

æœ‰ä¸€æ¡è¯­å¥ï¼š`select * from user where name like 'å¼ %' and age=10 and ismale = 1;`ã€‚æŸ¥è¯¢å§“å¼ çš„ï¼Œå¹´é¾„ä¸º 10 å²ï¼Œå¹¶ä¸”ä¸ºç”·æ€§çš„ç”¨æˆ·ã€‚

è¿™ä¸ªè¡¨æœ‰ä¸€ä¸ª`name,age`çš„è”åˆç´¢å¼•ã€‚

![](https://raw.githubusercontent.com/liunaijie/images/master/20191110164716.png)

è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒæ‰¾åˆ°æ»¡è¶³ name æ¡ä»¶çš„ç»“æœåï¼Œä¼šåœ¨ç´¢å¼•é‡Œé¢è¿›è¡Œ age çš„åˆ¤æ–­ï¼ˆå› ä¸ºæ˜¯ nameï¼Œageçš„è”åˆç´¢å¼•ï¼‰ã€‚ç„¶åå†å»å›è¡¨ï¼Œè¿™æ ·èƒ½å‡å°‘å›è¡¨çš„æ¬¡æ•°ã€‚æé«˜æ•ˆç‡ã€‚

# count()çš„æ•ˆç‡

å¯¹äº count å‡½æ•°ï¼Œä¸»è¦æœ‰count(*),count(1),count(ä¸»é”® id),count(å­—æ®µ)è¿™å‡ ç§ç”¨æ³•ã€‚

1. count(å­—æ®µ)ï¼šéå†æ•´å¼ è¡¨ï¼Œå°†æ¯ä¸€è¡Œçš„è¿™ä¸ªå­—æ®µæ‹¿å‡ºæ¥ï¼Œåˆ¤æ–­ä¸ä¸º null æ—¶è¿›è¡Œç´¯åŠ ã€‚
2. count(ä¸»é”®id)ï¼šéå†æ•´å¼ è¡¨ï¼ŒæŠŠæ¯ä¸€è¡Œçš„ id å–å‡ºæ¥ï¼Œ åˆ¤æ–­ä¸ä¸ºç©ºï¼Œå°±æŒ‰è¡Œç´¯åŠ 
3. count(1)ï¼šéå†æ•´å¼ è¡¨ï¼Œä½†ä¸å–å€¼ï¼Œå¯¹äºè¿”å›çš„æ¯ä¸€è¡Œï¼ŒæŒ‰è¡Œç´¯åŠ ã€‚
4. count(*)ï¼šæŒ‰è¡Œç´¯åŠ ã€‚

æ•´ä½“æ•ˆç‡ï¼šcount(*)â‰ˆcount(1)>count(ä¸»é”® id)>count(å­—æ®µ)

# å‚è€ƒï¼š

1. https://blog.csdn.net/qq_35008624/article/details/81947773
2. æå®¢æ—¶é—´ã€ŠMySQL å®æˆ˜ 45 è®²ã€‹